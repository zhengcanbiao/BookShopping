<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.1//EN" "http://struts.apache.org/dtds/struts-2.1.dtd">
<struts>
<constant name="struts.objectFactory" value="spring" />
	<constant name="struts.configuration.xml.reload" value="true" />
	
	<package name="Authority" namespace="/customer" extends="struts-default, json-default">
		<interceptors>
			<interceptor name="loginInterceptor" class="LoginInterceptor" />
			<interceptor name="autoLoginInterceptor" class="AutoLoginInterceptor" />
			<interceptor-stack name="bookshoppingLogin">
				<interceptor-ref name="autoLoginInterceptor" />
				<interceptor-ref name="loginInterceptor" />
				<interceptor-ref name="defaultStack" />
			</interceptor-stack>
			<interceptor-stack name="bookshoppingDefault">
				<interceptor-ref name="defaultStack" />
				<interceptor-ref name="autoLoginInterceptor" />
			</interceptor-stack>
		</interceptors>
		
		<default-interceptor-ref name="bookshoppingDefault" />
				
		<global-results>
			<result name="login">/login.jsp</result>
		</global-results>
		
		
		<action name="RedirectToHome" class="RedirectToHomeAction">
			<result name="success">/WEB-INF/jsp/customer/home.jsp</result>
		</action>
		
	</package>

<package name="CustomerAction" namespace="/customer" extends="Authority">
		<action name="Login" class="LoginAction">
			<result name="success" type="json">
				<param name="root">result</param>
			</result>
		</action>
		<action name="Register" class="RegisterAction">
			<result name="input" type="redirect">/register.jsp</result>
			<result name="success" type="redirectAction">RedirectToHome</result>
		</action>
		<action name="PreparePersonalInfo" class="PreparePersonalInfoAction">
			<result name="success">/WEB-INF/jsp/customer/personalInfo.jsp</result>
			<interceptor-ref name="bookshoppingLogin" />
		</action>
		<action name="ModifyPersonalInfo" class="ModifyPersonalInfoAction">
			<result name="input" type="chain">PreparePersonalInfo</result>
			<result name="success" type="redirectAction">PreparePersonalInfo</result>
			<interceptor-ref name="bookshoppingLogin" />
		</action>
		<action name="ForgetPassword" class="ForgetPasswordAction">
			<result name="success" type="json">
				<param name="root">result</param>
			</result>
		</action>
		<action name="Logout" class="LogoutAction">
			<result name="success" type="redirectAction">RedirectToHome</result>
		</action>
		<action name="PrepareCredits" class="PrepareCreditsAction">
			<result name="success">/WEB-INF/jsp/customer/credits.jsp</result>
			<interceptor-ref name="bookshoppingLogin" />
		</action>
		<action name="PreparePersonalHome" class="PreparePersonalHomeAction">
			<result name="success">/WEB-INF/jsp/customer/accountHome.jsp</result>
		</action>
	</package>
	
	<package name="CustomerAjaxAction" namespace="/customer" extends="Authority">
		<action name="CheckCustomerName" class="CheckCustomerNameAction">
			<result type="json">
				<param name="root">result</param>
			</result>
		</action>
		<action name="CheckNickName" class="CheckNickNameAction">
			<result type="json">
				<param name="root">result</param>
			</result>
		</action>
	</package>
	
	<package name="CategoryAjaxAction" namespace="/customer" extends="Authority">
		<action name="GetSubcategoryList" class="GetSubcategoryListAction">
			<result type="json">
				<param name="root">result</param>
			</result>
		</action>
	</package>
	
	<package name="BooksAction" namespace="/customer" extends="Authority">
		<action name="PrepareBooksInfoList" class="PrepareBooksInfoListAction">
			<result name="success">/WEB-INF/jsp/customer/booksList.jsp</result>
		</action>
		<action name="PrepareBooksDetail" class="PrepareBooksDetailAction">
			<result name="success">/WEB-INF/jsp/customer/booksDetail.jsp</result>
		</action>
		<action name="SearchBooks" class="SearchBooksAction">
			<result name="success">/WEB-INF/jsp/customer/searchResult.jsp</result>
		</action>
	</package>
	
	<package name="FavoriteAction" namespace="/customer" extends="Authority">
		<action name="PrepareFavorite" class="PrepareFavoriteAction">
			<result name="success">/WEB-INF/jsp/customer/favorite.jsp</result>
			<interceptor-ref name="bookshoppingLogin" />
		</action>
	</package>
	
	<package name="FavoriteAjaxAction" namespace="/customer" extends="Authority">
		<action name="AddFavorite" class="AddFavoriteAction">
			<result type="json">
				<param name="root">result</param>
			</result>
		</action>
		<action name="DeleteFavorite" class="DeleteFavoriteAction">
			<result type="json">
				<param name="root">result</param>
			</result>
			<interceptor-ref name="bookshoppingLogin" />
		</action>
	</package>
	
	<package name="AddressAction" namespace="/customer" extends="Authority">
		<action name="PrepareAddress" class="PrepareAddressAction">
			<result name="success">/WEB-INF/jsp/customer/address.jsp</result>
			<interceptor-ref name="bookshoppingLogin" />
		</action>
		<action name="AddAddress" class="AddAddressAction">
			<result name="success" type="json">
				<param name="root">result</param>
			</result>
			<interceptor-ref name="bookshoppingLogin" />
		</action>
		<action name="RedirectToModifyPassword" class="RedirectToModifyPasswordAction">
			<result name="success">/WEB-INF/jsp/customer/modifyPassword.jsp</result>
			<interceptor-ref name="bookshoppingLogin" />
		</action>
		<action name="CheckPassword" class="CheckPasswordAction">
			<result name="success" type="json">
				<param name="root">result</param>
			</result>
			<interceptor-ref name="bookshoppingLogin" />
		</action>
		
		<action name="ModifyAddress" class="ModifyAddressAction">
			<result name="success" type="redirectAction">PrepareAddress</result>
		</action>
		
		<action name="ModifyPassword" class="ModifyPasswordAction">
			<result name="success">/WEB-INF/jsp/customer/modifyPasswordSuccess.jsp</result>
			<interceptor-ref name="bookshoppingLogin" />
		</action>
	</package>
	
	<package name="AddressAjaxAction" namespace="/customer" extends="Authority">
		<action name="GetProvinceList" class="GetProvinceListAction">
			<result type="json">
				<param name="root">result</param>
			</result>
			<interceptor-ref name="bookshoppingLogin" />
		</action>
		<action name="GetCityList" class="GetCityListAction">
			<result type="json">
				<param name="root">result</param> 
			</result>
		</action>
		<action name="GetTownList" class="GetTownListAction">
			<result type="json">
				<param name="root">result</param>
			</result>
		</action>
		<action name="DeleteAddress" class="DeleteAddressAction">
			<result type="json">
				<param name="root">result</param>
			</result>
			<interceptor-ref name="bookshoppingLogin" />
		</action>
		<action name="SetDefaultAddress" class="SetDefaultAddressAction">
			<result type="json">
				<param name="root">result</param>
			</result>
			<interceptor-ref name="bookshoppingLogin" />
		</action>
	</package>
	
</struts>    
